<!DOCTYPE html>
<html>
  <head>
    <!--viewport-fit=cover:Fill the whole screen on iPhone X-->
    <meta
      charset="utf-8"
      name="viewport"
      content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"
    />
    <title>(っ °Д °;)っ</title>
    <style>
      .md {
        color: gray;
      }
    </style>
    <link rel="manifest" href="./manifest.json" />
    <link rel="stylesheet" href="./utils/style.css" />
    <link rel="stylesheet" href="style.css?v=142218" />
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("./service-worker.js").then(() => {
          console.log("Service Worker Registered");
        });
      }
    </script>
    <script>
      (function () {
        var src = "//fastly.jsdelivr.net/npm/eruda";
        if (!new URLSearchParams(location.search).has("test")) return;
        document.write("<scr" + 'ipt src="' + src + '"></scr' + "ipt>");
        document.write("<scr" + "ipt>eruda.init();</scr" + "ipt>");
      })();
    </script>
    <script>
      if (!window.Promise) location.href = "/412.html";
    </script>
    <script src="./utils/main.js"></script>
    <script type="module" src="script.js?v=142218"></script>
  </head>

  <body>
    <noscript><strong style="color: #f00">此浏览器不支持JavaScript，该脚本无法运行。</strong></noscript>
    <div class="index">
      <div class="main">
        <h1 class="title"></h1>
        <p class="info"></p>
        <p class="profile">
          上传<a id="qwq">谱面和资源文件</a
          >或将其打包成zip然后上传；<br />读取完成后调节相关参数，最后点击“播放”按钮。<br />播放时双击画面：左上角暂停；右上角重新开始；右下角全屏。
        </p>
        <div id="uploader" class="disabled">
          <input type="button" id="uploader-upload" value="上传" />
          <div id="uploader-select">
            <label id="uploader-file">上传文件</label>
            <label id="uploader-dir">上传文件夹</label>
          </div>
        </div>
        <input type="button" value="重置" onclick="location.reload(true)" />
        <input type="button" id="btn-more" value="更多设置" />
        <div id="select" class="disabled">
          <div>谱面：<select id="select-chart" style="width: 6em"></select></div>
          <div>音乐：<select id="select-bgm" style="width: 6em"></select></div>
          <div>图片：<select id="select-bg" style="width: 6em"></select></div>
          <br />
          <div>
            宽高比：<select id="select-aspect-ratio" style="width: 4em">
              <option value="1.25">5:4</option>
              <option value="1.333333">4:3</option>
              <option value="1.428571">10:7</option>
              <option value="1.461538">19:13</option>
              <option value="1.6">8:5</option>
              <option value="1.666667">5:3</option>
              <option value="1.692308">22:13</option>
              <option value="1.777778" selected>16:9</option>
            </select>
          </div>
          <div>
            按键缩放：<select id="select-note-scale" style="width: 4em">
              <option value="0.8">极小</option>
              <option value="0.9">较小</option>
              <option value="1" selected>默认</option>
              <option value="1.15">较大</option>
              <option value="1.3">极大</option>
            </select>
          </div>
          <div>
            背景变暗：<select id="select-background-dim" style="width: 4em">
              <option value="1">黑暗</option>
              <option value="0.8">昏暗</option>
              <option value="0.6" selected>默认</option>
              <option value="0.4">较亮</option>
              <option value="0.2">明亮</option>
            </select>
          </div>
          <br />
          <div>曲名：<input id="input-name" class="input" style="width: 7em" placeholder="&#60; Untitled &#62;" /></div>
          <div>
            曲师：<input id="input-artist" class="input" style="width: 7em" placeholder="&#60; nameless &#62;" />
          </div>
          <br />
          <div>
            曲绘：<input id="input-illustrator" class="input" style="width: 7em" placeholder="&#60; nameless &#62;" />
          </div>
          <div>
            谱师：<input id="input-charter" class="input" style="width: 7em" placeholder="&#60; nameless &#62;" />
          </div>
          <br />
          <div>
            难度：<select id="select-difficulty" style="width: 3em">
              <option value="" selected>SP</option>
              <option value="EZ">EZ</option>
              <option value="HD">HD</option>
              <option value="IN">IN</option>
              <option value="AT">AT</option>
            </select>
          </div>
          <div>
            等级：<select id="select-level" style="width: 3em">
              <option value="" selected>?</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
            </select>
          </div>
          <div>
            音效音量：<select id="select-volume" style="width: 5em">
              <option value="0">0%</option>
              <option value="0.25">25%</option>
              <option value="0.5">50%</option>
              <option value="1" selected>100%</option>
              <option value="2.5">250%</option>
              <option value="5">500%</option>
            </select>
          </div>
          <br />
          <div><input type="checkbox" id="feedback" checked /><label for="feedback">触摸反馈</label></div>
          <div><input type="checkbox" id="imageBlur" checked /><label for="imageBlur">背景模糊</label></div>
          <div><input type="checkbox" id="highLight" checked /><label for="highLight">多押高亮</label></div>
          <br />
          <div><input type="checkbox" id="lineColor" checked /><label for="lineColor">FC/AP指示器</label></div>

          <div class="disabled-when-playing">
            <input type="checkbox" id="showTransition" checked /><label for="showTransition">过渡动画</label>
          </div>
          <br />
          <div class="">
            谱面镜像：<select id="select-flip" style="width: 4em">
              <option value="0" selected>无</option>
              <option value="1">X轴</option>
              <option value="2">Y轴</option>
              <option value="3">X&Y</option>
            </select>
          </div>
          <div class="disabled-when-playing">
            音乐变速：<input id="select-speed" type="text" value="1.00" style="width: 4em" />
          </div>
          <br />
          <div class="disabled-when-playing">
            谱面延时(ms)：<input
              id="input-offset"
              type="number"
              step="5"
              class="input"
              style="width: 4em"
              placeholder="0"
            />
          </div>
          <br /><br />
          <!-- Add mods options -->
          <div class="disabled-when-playing">
            <b>== 模组 ==</b>
            <br />
            <span style="color: red">请在上传谱面后再启用模组, 否则无法正常读取.</span>
            <br />
            <input type="button" id="helpmods" value="模组说明" />
            <br />
            休闲：
            <input type="checkbox" id="mod-ez" />
            <label title="各方面难度都降低一点" for="mod-ez">Easy</label>
            <span class="md"
              >判定时间扩大一倍<br />横向判定区域扩大 25%<br />取消 Bad 判定 <br />连击断开时保留一定的连击数, 与 Half
              Time 的效果不叠加<br />Hold 可以中间松开而不视为 Miss</span
            >

            <input type="checkbox" id="mod-rl" />
            <label title="判到就是 Perfect" for="mod-rl">Relax</label>
            <span class="md">Good 和 Bad 判定全都算作 Perfect 判定</span>

            <input type="checkbox" id="mod-ht" />
            <label title="降低速度" for="mod-ht">Half Time</label>
            <span class="md"
              >谱面速度降低 25%, 判定时间相应增长<br />Miss 两次才会断掉 Combo, 与 Easy 的效果不叠加且本模组优先</span
            >

            <input type="checkbox" id="mod-fo" />
            <label title="Flick 只要接住就行" for="mod-fo">Flick Over</label>
            <span class="md">接住即可判定 Flick, 像 Drag 一样</span>

            <input type="checkbox" id="mod-nf" />
            <label title="接住你漏掉的 Drag" for="mod-nf">No Fall</label>
            <span class="md">Drag 由系统为你代打<br />Hold 可以中间松开而不视为 Miss</span>

            <br />

            挑战：
            <input type="checkbox" id="mod-hr" />
            <label title="各方面难度都提升一点" for="mod-hr">Hard Rock</label>
            <span class="md">判定区间缩短一半<br />Bad 的判定仅略微减短<br />横向判定区域削减 25%</span>

            <input type="checkbox" id="mod-eb" />
            <label title="不接受 Good" for="mod-eb">Elite Beat</label>
            <span class="md">Good(Early) 判定都算作 Bad, Good(Late) 无法打出</span>

            <input type="checkbox" id="mod-dt" />
            <label title="加快速度" for="mod-dt">Double Time</label>
            <span class="md">谱面速度提升 25%, 判定时间相应缩短<br /></span>

            <input type="checkbox" id="mod-hd" />
            <label title="Note 在到达判定线之前消失" for="mod-hd">Hidden</label>
            <span class="md"
              >Tap, Drag 和 Flick 在到达判定线之前会淡出并消失<br />Hold 不会消失但会降低亮度<br />
              作为补偿, 略微扩大判定范围</span
            >

            <input type="checkbox" id="mod-fl" />
            <label title="判定线逐渐消失" for="mod-fl">Fade Line</label>
            <span class="md">Combo 越多判定线亮度越低, 在 100 连击的时候彻底消失.</span>

            <br />

            分数系统：
            <input type="checkbox" id="mod-sk" />
            <label title="模拟课题模式" for="mod-sk">Skill</label>
            <span class="md">模拟课题模式, 削减判定范围, 取消连击分<br />其它模组的分数加成不适用</span>

            <input type="checkbox" id="mod-is" />
            <label title="试试新的计分系统" for="mod-is">InfScore</label>
            <span class="md"
              >Perfect 计 100, Good 计 65, Bad 计 1<br />并乘算当前的连击数<br />没有分数上限!
              打出更高的连击来获得更多分数!</span
            >
            <br />

            回放：

            <input type="checkbox" id="autoplay" />
            <label title="sudo 板子自己打歌" for="autoplay">Auto</label>
            <span class="md">原来的 Autoplay, 自动播放</span>

            <input type="checkbox" id="replay" />
            <label title="观看上一次回放" for="replay">Replay</label>
            <span class="md">在游玩过一次后, 观看回放<br />不要改变模组配置, 可能会出 Bug</span>
            <br />
          </div>
          <br />
          <br />
          <div style="color: red">(回放功能现在有 BUG, 仅供娱乐)</div>
          <br />
          <div>
            <input type="button" id="btn-export-replay" value="导出回放" />
            <input type="button" id="btn-import-replay" value="导入回放" />
          </div>
          <br />
          <div>
            <input type="button" id="btn-play" value="播放" />
            <input type="button" id="btn-pause" value="暂停" />
          </div>
        </div>
        <div><strong id="msg-out">初始化...</strong></div>
        <div id="stage">
          <i class="tl">&#xe900;</i><i class="tr">&#xe902;</i><i class="bl">&#xe909;</i><i class="br">&#xe904;</i>
          <div id="mask">
            <div>GitHub: lchz&#104;3473/sim-phi</div>
            <div style="font-size: small">Modded at skjsjhb/sim-phi-modded</div>
          </div>
        </div>
        <div id="cover-dark" class="fade"></div>
        <div id="cover-view" class="fade">
          <div id="view-nav" class="view-nav">
            <a id="use">模拟器使用说明</a>
            <a id="msg">信息</a>
          </div>
          <div id="view-content" class="view-content">
            <iframe id="view-doc" src="" frameborder="0"></iframe>
            <div id="view-msg"></div>
          </div>
        </div>
        <div id="cover-config" class="fade">
          <div class="view-nav">
            <p>更多设置</p>
          </div>
          <div class="view-content">
            <div id="view-config">
              <div><input type="checkbox" id="showCE2" /><label for="showCE2">Early/Late特效</label></div>
              <div><input type="checkbox" id="showPoint" /><label for="showPoint">显示定位点</label></div>
              <div><input type="checkbox" id="showAcc" /><label for="showAcc">显示Acc</label></div>
              <div><input type="checkbox" id="showStat" /><label for="showStat">显示统计</label></div>
              <div><input type="checkbox" id="lowRes" /><label for="lowRes">低分辨率</label></div>
              <div><input type="checkbox" id="lockOri" checked /><label for="lockOri">横屏锁定</label></div>
              <br />
            </div>
          </div>
        </div>
      </div>
      <p class="footer">
        Simulator &copy;&nbsp;2020-2023&nbsp;lchz&#104;3473
        <br />
        Mods &copy;&nbsp;2023&nbsp;skjsjhb, contact via
        <a href="mailto:skjsjhb@outlook.com">E-mail</a>
        <br />
        The copyright of the assets used in the project belongs to the copyright owner or unit, and they are only used
        for learning and communication. In case of infringement, please contact to delete.
      </p>
    </div>
  </body>
</html>
